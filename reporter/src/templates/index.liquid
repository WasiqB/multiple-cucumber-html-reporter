{% layout "layout.liquid" %}

{% block content %}
<div class="space-y-6">
    <!-- Run Information Row -->
    {% render "includes/run_info_card.liquid", data: data %}

    <!-- Top row - Key metrics status -->
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        <div class="rounded-xl border bg-card text-card-foreground shadow p-6">
            <h3 class="text-sm font-semibold mb-4 text-muted-foreground uppercase tracking-wider">Features Status</h3>
            <div id="features-chart" class="h-64"></div>
        </div>
        <div class="rounded-xl border bg-card text-card-foreground shadow p-6">
            <h3 class="text-sm font-semibold mb-4 text-muted-foreground uppercase tracking-wider">Scenarios Status</h3>
            <div id="scenarios-chart" class="h-64"></div>
        </div>
        <div class="rounded-xl border bg-card text-card-foreground shadow p-6">
            <h3 class="text-sm font-semibold mb-4 text-muted-foreground uppercase tracking-wider">Steps Status</h3>
            <div id="steps-status-chart" class="h-64"></div>
        </div>
    </div>

    <!-- Analytics Charts -->
    <div class="grid gap-6 lg:grid-cols-3">
        <div class="rounded-xl border bg-card text-card-foreground shadow p-6">
            <h3 class="text-sm font-semibold mb-4 text-muted-foreground uppercase tracking-wider">Device & OS</h3>
            <div id="device-os-chart" class="h-64"></div>
        </div>
        <div class="rounded-xl border bg-card text-card-foreground shadow p-6">
            <h3 class="text-sm font-semibold mb-4 text-muted-foreground uppercase tracking-wider">Browsers</h3>
            <div id="browser-chart" class="h-64"></div>
        </div>
        <div class="rounded-xl border bg-card text-card-foreground shadow p-6">
            <h3 class="text-sm font-semibold mb-4 text-muted-foreground uppercase tracking-wider">Top 10 Tags</h3>
            <div id="tag-distribution-chart" class="h-64"></div>
        </div>
    </div>

    <!-- Status Trend -->
    <div class="rounded-xl border bg-card text-card-foreground shadow p-6">
        <h3 class="text-sm font-semibold mb-4 text-muted-foreground uppercase tracking-wider">Features Status Trend</h3>
        <div id="status-trend-chart" class="h-80 w-full"></div>
    </div>

    <!-- Features Overview Table -->
    {% render "includes/features_table.liquid", data: data %}
</div>

<script>
    // Embedded data for charts
    const chartData = {
        summary: {{ data.summary | json }},
        features: {{ data.features | json }}
    };
</script>
{% endblock %}
